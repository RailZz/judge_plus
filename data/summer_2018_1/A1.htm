<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!--
 Archive processed by SingleFile 
 url: https://informatics.msk.ru/mod/statements/print3.php?id=33264 
 saved date: Sun Aug 05 2018 22:17:19 GMT+0300 (MSK) 
--><head><meta charset=utf-8> <title>Параллель A. Дерево отрезков и всякие прибамбасы</title> <style>.problem-statement{margin:.5em;font-family:verdana;line-height:1.5em;font-size:14px}.problem-statement p{margin:0 0 1em}.problem-statement .legend{margin-bottom:1em}.problem-statement .section-title{font-family:arial;font-size:115%;font-weight:bold}.problem-statement .output-specification{margin-bottom:1em}.problem-statement .sample-tests .input,.problem-statement .sample-tests .output{border:1px solid #888}.problem-statement .sample-tests .output{margin-bottom:1em;position:relative;top:-1px}.problem-statement .sample-tests pre{line-height:1.25em;padding:.25em;margin:0;background-color:#efefef}.problem-statement .sample-tests .title{font-family:arial;padding:.25em;border-bottom:1px solid #888;text-transform:lowercase;font-weight:bold}.problem-statement .tex-span{font-size:125%;font-family:"times new roman"}.problem-statement .tex-font-style-it{font-style:italic}</style> <meta http-equiv=Content-Type content="text/html; charset=utf-8"> <meta http-equiv=Content-Type content="text/html; charset="> <meta name=description content="Параллель A. Дерево отрезков и всякие прибамбасы"> <style>h1,h2,h3,h4,h5,h6{margin-left:0;font-family:"Times New Roman",Times,serif;break-after:avoid;break-inside:avoid}.statements_title{margin-left:-40px;font-family:Tahoma,Verdana,Arial,Helvetica,sans-serif;font-size:3em;font-weight:bold;margin-top:120px;margin-bottom:30px;text-align:center}.statements_summary{margin-left:-40px;text-align:center;margin-bottom:120px}.statements_chapter_title{font-family:Tahoma,Verdana,Arial,Helvetica,sans-serif;text-align:left;font-size:1.7em;font-weight:bold;border-style:solid;border-width:0 0 1px;margin-left:0;margin-bottom:20px}.statements_chapter{break-before:page}body{margin-left:50px;margin-right:10px;color:#000;background-color:#fff;font-family:"Times New Roman",Times,serif;font-size:1em;font-weight:normal;text-decoration:none}</style> <link type=image/x-icon rel="shortcut icon" href=data:image/x-icon;base64,></head> <body> <a name=top></a> <p class=statements_title>Параллель A. Дерево отрезков и всякие прибамбасы</p> <p class=statements_summary></p>  <div class=statements_toc_alpha><a name=toc></a><p class=statements_chapter_title>Список задач</p><ul><li><a href=#ch1364><b>Задача A.</b> Сугробы на ЛЭП</a></li><li><a href=#ch111222><b>Задача B.</b> Вирусы и антивирусы</a></li><li><a href=#ch111800><b>Задача C.</b> Окна</a></ul></div><hr><div class=statements_chapter><h1><a name=ch1364>Сугробы на ЛЭП</a></h1><p class=statements_chapter_title><b>Задача A.</b> Сугробы на ЛЭП</p><div class=problem-statement> <div class=legend> <p>Служба электроснабжения проводит мониторинг уровня снега, лежащего на ЛЭП Нью-Васюки - Москва. Вся ЛЭП разбивается на участки опорами. Снег имеет свойства падать на какой-либо интервал ЛЭП, если там уже лежал какой-либо снег, то высота снежного покрова на этом участке суммируется. Также снег имеет тенденцию таять на участке трассы в результате оттепели, при этом известно, что не бывает сугробов отрицательной высоты. Энергетикам крайне важно уметь узнавать суммарную высоту снежного покрова на некоторых последовательных участках, чтобы знать вероятность обрыва проводов.</p> </div> <div class=input-specification> <div class=section-title> Входные данные </div> <p>В первой строке входного файла содержатся два числа: <span>N</span> – (1 ≤ <span>N</span> ≤ 10<span> </span>000) и <span>M</span> – количество команд (1 ≤ <span>M</span> ≤ 50<span> </span>000). Каждая команда имеет вид “1 <span>L</span> <span>R</span> <span>S</span>”, что означает, что на участок с <span>L</span>-ой опоры по <span>R</span>-ую опору выпало <span>S</span> сантиметров снега (<span>S</span> может быть и отрицательным, тогда это означает, что такое количества снега растаяло), или “2 <span>L</span> <span>R</span>” – запрос суммарной высоты снега на участке с <span>L</span>-ой опоры по <span>R</span>-ую. Опоры нумеруются от 0 до <span>N</span>. Гарантируется, что для запросов вида “1 <span>L</span> <span>R</span> <span>S</span>” при S < 0 на каждом участке между опорами L и R уровень снега составляет не менее S. </p> </div> <div class=output-specification> <div class=section-title> Выходные данные </div> <p>На каждую команду 2 (запрос) вы должны выводить число <span>K</span> – суммарную высоту снежного покрова, лежащего на проводах с <span>L</span>-ой опоры по <span>R</span>-ую. Каждое число должно выводиться на новой строке. Известно, что в процессе работы суммарное количество снега на любом интервале не превышает 2<sup>31</sup>.</p> </div> </div> <div class=problem-statement><div class=sample-tests><div class=section-title>Примеры</div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>10 5
1 0 9 10
1 1 5 -3
2 4 8
1 0 6 25
2 0 2
</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>37
67
</pre></div></div></div></div></div><hr><div class=statements_chapter><h1><a name=ch111222>Вирусы и антивирусы</a></h1><p class=statements_chapter_title><b>Задача B.</b> Вирусы и антивирусы</p><div class=problem-statement-preview><div class=problem-statement><div class=legend><p>Антивирусная IT-компания имеет официальную иерархическую структуру управления. В ней есть босс – единственный сотрудник, над которым нет начальника. Каждый из остальных сотрудников подчинён ровно одному сотруднику – своему начальнику. Начальник может иметь нескольких подчинённых и отдавать или передавать приказы любому из них. Приказы могут передаваться от одного сотрудника другому только по цепочке, каждый раз от начальника к его подчинённому. Сотрудник А <span class=tex-font-style-it>главнее</span> сотрудника Б в этой иерархии, если А может отдать или передать приказ сотруднику Б непосредственно, или через цепочку подчинённых. Босс главнее любого сотрудника. Оказалось, что все сотрудники объединены ещё в одну организованную подобным образом тайную иерархическую структуру, производящую компьютерные вирусы. В тайной структуре может быть другой босс, а у сотрудников – другие начальники. Будем называть пару сотрудников А и Б <span class=tex-font-style-it>устойчивой</span>, если А главнее Б и в основной, и в тайной иерархических структурах. Требуется написать программу, определяющую количество устойчивых пар в компании.</p></div><p></p><p></p><div class=input-specification><div class=section-title>Входные данные</div><p></p><p>В первой строке задано число <span class=tex-span><i>N</i></span> – количество сотрудников компании (<span class=tex-span>1 ≤ <i>N</i> ≤ 100 000</span>). Во второй строке – <span class=tex-span><i>N</i></span> целых чисел <span class=tex-span><i>a</i><sub class=lower-index><i>i</i></sub></span>, где <span class=tex-span><i>a</i><sub class=lower-index><i>i</i></sub> = 0</span>, если в официальной иерархии сотрудник с номером <span class=tex-span><i>i</i></span> является боссом, в противном случае <span class=tex-span><i>a</i><sub class=lower-index><i>i</i></sub></span> равно номеру непосредственного начальника сотрудника номер <span class=tex-span><i>i</i></span>. В третьей строке – <span class=tex-span><i>N</i></span> целых чисел <span class=tex-span><i>b</i><sub class=lower-index><i>i</i></sub></span>, где <span class=tex-span><i>b</i><sub class=lower-index><i>i</i></sub> = 0</span>, если в тайной иерархии сотрудник с номером <span class=tex-span><i>i</i></span> является боссом, в противном случае <span class=tex-span><i>b</i><sub class=lower-index><i>i</i></sub></span> равно номеру непосредственного начальника сотрудника номер <span class=tex-span><i>i</i></span>. Нумерация сотрудников ведется с единицы в том порядке, в каком они упомянуты во входном файле.</p></div><p></p><p></p><div class=output-specification><div class=section-title>Выходные данные</div><p></p><p>Выходной файл должен содержать единственное число – количество устойчивых пар.</p></div><p></p><p></p><div class=note><div class=section-title>Примечание</div><p></p><p>Данная задача содержит три подзадачи. Для оценки каждой подзадачи используется своя группа тестов. Баллы за подзадачу начисляются только в том случае, если все тесты из этой группы пройдены.</p><p></p><ol type=1><p></p><p></p><li> (оценивается в 25 баллов) Количество сотрудников <span class=tex-span><i>N</i></span> не превосходит <span class=tex-span>100</span>.<p></p><p></p></li><li> (оценивается в 25 баллов) Количество сотрудников <span class=tex-span><i>N</i></span> не превосходит <span class=tex-span>2000</span>.<p></p><p></p></li><li> (оценивается в 50 баллов) Количество сотрудников <span class=tex-span><i>N</i></span> не превосходит <span class=tex-span>10<sup class=upper-index>5</sup></span>.<p></p><p></p></ol></div></div><p></p> </div>
<div class=problem-statement><div class=sample-tests><div class=section-title>Примеры</div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>3
0 3 1
0 1 1
</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>2
</pre></div></div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>5
2 0 1 3 4
3 1 0 2 4
</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>7
</pre></div></div></div></div></div><hr><div class=statements_chapter><h1><a name=ch111800>Окна</a></h1><p class=statements_chapter_title><b>Задача C.</b> Окна</p><div class=problem-statement><div class=legend><p>На экране расположены прямоугольные окна, каким-то образом перекрывающиеся (со сторонами, параллельными осям координат). Вам необходимо найти точку, которая покрыта наибольшим числом из них.</p></div><p></p><p></p><div class=input-specification><div class=section-title>Входные данные</div><p></p><p>В первой строке входного файла записано число окон <span class=tex-span><i>n</i></span> (<span class=tex-span>1 ≤ <i>n</i> ≤ 50 000</span>). Следующие <span class=tex-span><i>n</i></span> строк содержат координаты окон <span class=tex-span><i>x</i><sub class=lower-index>(1, <i>i</i>)</sub> <i>y</i><sub class=lower-index>(1, <i>i</i>)</sub> <i>x</i><sub class=lower-index>(2, <i>i</i>)</sub> <i>y</i><sub class=lower-index>(2, <i>i</i>)</sub></span>, где <span class=tex-span>(<i>x</i><sub class=lower-index>(1, <i>i</i>)</sub>, <i>y</i><sub class=lower-index>(1, <i>i</i>)</sub>)</span> — координаты левого верхнего угла <span class=tex-span><i>i</i></span>-го окна, а <span class=tex-span>(<i>x</i><sub class=lower-index>(2, <i>i</i>)</sub>, <i>y</i><sub class=lower-index>(2, <i>i</i>)</sub>)</span> — правого нижнего (на экране компьютера <span class=tex-span><i>y</i></span> растет сверху вниз, а <span class=tex-span><i>x</i></span> — слева направо). Все координаты — целые числа, по модулю не превосходящие <span class=tex-span>10<sup class=upper-index>6</sup></span>.</p></div><p></p><p></p><div class=output-specification><div class=section-title>Выходные данные</div><p></p><p>В первой строке выходного файла выведите максимальное число окон, покрывающих какую-либо из точек в данной конфигурации. Во второй строке выведите два целых числа, разделенных пробелом — координаты точки, покрытой максимальным числом окон. Окна считаются замкнутыми, т. е. покрывающими свои граничные точки.</p></div><p></p><p></p></div><div class=problem-statement><div class=sample-tests><div class=section-title>Примеры</div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>2
0 0 3 3
1 1 4 4
</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>2
1 3
</pre></div></div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>1
0 0 1 1
</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>1
0 1
</pre></div></div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>4
0 0 1 1
0 1 1 2
1 0 2 1
1 1 2 2
</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>4
1 1
</pre></div></div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>5
0 0 1 1
0 1 1 2
0 0 2 2
1 0 2 1
1 1 2 2
</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>5
1 1
</pre></div></div></div></div></div> <autoscroll></autoscroll></body></html>