<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><!--
 Archive processed by SingleFile 
 url: https://informatics.msk.ru/moodle/mod/statements/print3.php?id=33350 
 saved date: Tue Aug 14 2018 09:57:28 GMT+0300 (MSK) 
--><meta charset=utf-8>
<title>Параллель A. Зачет</title>
<style>.problem-statement{margin:.5em;font-family:verdana;line-height:1.5em;font-size:14px}.problem-statement p{margin:0 0 1em}.problem-statement ul{list-style:disc inside}.problem-statement .legend{margin-bottom:1em}.problem-statement .section-title{font-family:arial;font-size:115%;font-weight:bold}.problem-statement .output-specification{margin-bottom:1em}.problem-statement .sample-tests .input,.problem-statement .sample-tests .output{border:1px solid #888}.problem-statement .sample-tests .output{margin-bottom:1em;position:relative;top:-1px}.problem-statement .sample-tests pre{line-height:1.25em;padding:.25em;margin:0;background-color:#efefef}.problem-statement .sample-tests .title{font-family:arial;padding:.25em;border-bottom:1px solid #888;text-transform:lowercase;font-weight:bold}.problem-statement .tex-span{font-size:125%;font-family:"times new roman"}</style>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta http-equiv=Content-Type content="text/html; charset=">
<meta name=description content="Параллель A. Зачет">
<style>h1,h2,h3,h4,h5,h6{margin-left:0;font-family:"Times New Roman",Times,serif;break-after:avoid;break-inside:avoid}.statements_title{margin-left:-40px;font-family:Tahoma,Verdana,Arial,Helvetica,sans-serif;font-size:3em;font-weight:bold;margin-top:120px;margin-bottom:30px;text-align:center}.statements_summary{margin-left:-40px;text-align:center;margin-bottom:120px}.statements_chapter_title{font-family:Tahoma,Verdana,Arial,Helvetica,sans-serif;text-align:left;font-size:1.7em;font-weight:bold;border-style:solid;border-width:0 0 1px;margin-left:0;margin-bottom:20px}.statements_chapter{break-before:page}body{margin-left:50px;margin-right:10px;color:#000;background-color:#fff;font-family:"Times New Roman",Times,serif;font-size:1em;font-weight:normal;text-decoration:none}font{color:#000;background-color:#eee;font-family:"Times New Roman",Times,serif;font-size:1em;font-weight:normal;text-decoration:none}</style>
<link type=image/x-icon rel="shortcut icon" href=data:image/x-icon;base64,></head> <body> <a name=top></a> <p class=statements_title>Параллель A. Зачет</p> <p class=statements_summary></p>  <div class=statements_toc_alpha><a name=toc></a><p class=statements_chapter_title>Список задач<ul><li><a href=#ch753><b>Задача A.</b> Непересекающиеся отрезки</a><li><a href=#ch113706><b>Задача B.</b> Почтовая реформа</a><li><a href=#ch16><b>Задача C.</b> Приключение</a></ul></div><hr><div class=statements_chapter><h1><a name=ch753>Непересекающиеся отрезки</a></h1><p class=statements_chapter_title><b>Задача A.</b> Непересекающиеся отрезки<div class=problem-statement> <div class=legend> <p>Отрезок целочисленной прямой длины <em>N</em> разбит на единичные отрезки, которые пронумерованы от 1 до <em>N</em>.</p>
<p>Их объединяют в группы по следующим правилам:<br> 1. Несколько подряд идущих отрезков, ни один из которых не принадлежит ни одной из групп, могут быть объединены в группу.<br> 2. Любая ранее созданная группа может быть уничтожена, при этом входившие в нее отрезки больше не относятся ни к какой группе и могут впоследствии быть отнесены к другим группам.<br></p> <p>Видно, что любой отрезок всегда находится не более, чем в одной группе.</p>
<p>Каждую группу можно идентифицировать парой чисел: номером первого и номером последнего отрезка, входящего в группу.</p>
<p>Первоначально нет ни одной группы. </p> </div> <div class=input-specification> <div class=section-title> Входные данные </div> <p>Первая строка входных данных содержит число <em>N</em> – количество отрезков и число <em>K</em> – количество запросов (1&nbsp;≤&nbsp;<em>N</em>,&nbsp;<em>K</em>&nbsp;≤10<sup>5</sup>). Далее идет <em>K</em> строчек, содержащих запросы к структуре данных. Каждый запрос начинается с числа <font face="courier new,courier,monospace">1</font> (запрос на создание группы) или <font face="courier new,courier,monospace">2</font> (запрос на удаление группы). После числа <font face="courier new,courier,monospace">1</font> указывается два других числа <em>l </em>и <em>r</em> (1&nbsp;≤ <em>l</em> ≤&nbsp;<em>r</em>&nbsp;≤&nbsp;<em>N</em>), после числа <font face="courier new,courier,monospace">2</font> указывается одно число <em>i</em> (1&nbsp;≤&nbsp;<em>i</em>&nbsp;≤&nbsp;<em>N</em>). </p> </div> <div class=output-specification> <div class=section-title> Выходные данные </div> <p>Для каждого запроса типа <font face="courier new,courier,monospace">1</font> необходимо отрезки с номерами от <em>l</em> до <em>r</em> объединить в группу. Если все эти отрезки не входят ни в одну группу, запрос считается удачным и программа должна вывести <font face="courier new,courier,monospace">1</font>. Если хотя бы один из этих отрезков уже относится к какой-то группе, запрос считается неудачным, объединение не производится и программа выводит <font face="courier new,courier,monospace">0</font>.</p> <p>Для каждого запроса типа <font face="courier new,courier,monospace">2</font> необходимо удалить группу, в которую входит отрезок с номером <em>i</em>, при этом программа должна вывести два числа: номер первого и последнего отрезка, входящих в удаляемую группу. Если отрезок с номером <em>i</em> не относится ни к одной группе, программа должна вывести два нуля.</p> </div> </div>
<div class=problem-statement><div class=sample-tests><div class=section-title>Примеры</div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>5 6
1 1 2
1 4 5
1 2 4
2 5
2 1
2 4

</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>1
1
0
4 5
1 2
0 0
</pre></div></div></div></div></div><hr><div class=statements_chapter><h1><a name=ch113706>Почтовая реформа</a></h1><p class=statements_chapter_title><b>Задача B.</b> Почтовая реформа<div class=problem-statement> <div class=legend> <p> В Флатландии идет пора реформ. Недавно была проведена реформа дорог, так что теперь по дорогам страны из любого города можно добраться в любой другой, причем только одним способом. Также была проведена реформа волшебников, так что в каждом городе остался ровно один волшебник. Теперь же началась реформа почтовой системы. </p> <p> Недавно образованное почтовое агентство «Экс-Федя» предлагает уникальную услугу&nbsp;— коллективную посылку. Эта услуга позволяет отправлять посылки жителям всех городов на каком-либо пути по цене обычной посылки. Удивительно, но пользоваться такой услугой стали только волшебники Флатландии, которые стали в большом количестве отправлять друг другу магические кактусы. Агентство столкнулось с непредвиденной проблемой: как известно, все волшебники живут в башнях и мало того, что не строят в них лестницы, так еще время от времени меняют их высоту. Поэтому, чтобы доставить посылку волшебнику, который живет в башне высотой <span class=tex-span> <i> h </i> </span> , курьеру агентства требуется иметь с собой не менее <span class=tex-span> <i> h </i> </span> метров веревки. </p> <p> Вам поручено руководить отделом логистики&nbsp;— по имеющимся данным о высотах башен и об их изменениях вам нужно определять минимальную длину веревки, которую нужно выдать курьеру, который доставляет посылки между городами <span class=tex-span> <i> i </i> </span> и <span class=tex-span> <i> j </i> </span> . </p> </div> <p> </p> <p> </p> <div class=input-specification> <div class=section-title> Входные данные </div> <p> </p> <p> Первая строка входного файла содержит число <span class=tex-span> <i> n </i> </span> — количество городов в Флатландии ( <span class=tex-span> 1 ≤ <i> n </i> ≤ 50 000 </span> ). Во второй строке находится <span class=tex-span> <i> n </i> </span> положительных чисел, не превосходящих <span class=tex-span> 10 <sup class=upper-index> 5 </sup> </span> — высоты башен в городах. В следующих <span class=tex-span> <i> n </i> - 1 </span> строках содержится по два числа <span class=tex-span> <i> u </i> <sub class=lower-index> <i> i </i> </sub> </span> и <span class=tex-span> <i> v </i> <sub class=lower-index> <i> i </i> </sub> </span> — описание <span class=tex-span> <i> i </i> </span> -й дороги, <span class=tex-span> 1 ≤ <i> u </i> <sub class=lower-index> <i> i </i> </sub> , <i> v </i> <sub class=lower-index> <i> i </i> </sub> ≤ <i> n </i> , <i> u </i> <sub class=lower-index> <i> i </i> </sub> ≠ <i> v </i> <sub class=lower-index> <i> i </i> </sub> </span> . В следующий строке содержится число <span class=tex-span> <i> k </i> </span> — количество запросов ( <span class=tex-span> 1 ≤ <i> k </i> ≤ 100 000 </span> ). В следующих <span class=tex-span> <i> k </i> </span> строках содержатся описания запросов в следующем формате: </p> <ul type=disc> <p> </p> <p> </p> <li> Уведомление от волшебника из города <span class=tex-span> <i> i </i> </span> о том, что высота его башни стала равна <span class=tex-span> <i> h </i> </span> , имеет вид <span class=tex-span> ! </span> <span class=tex-span> <i> i </i> </span> <span class=tex-span> <i> h </i> </span> , <span class=tex-span> 1 ≤ <i> i </i> ≤ <i> n </i> </span> , <span class=tex-span> 1 ≤ <i> h </i> ≤ 10 <sup class=upper-index> 5 </sup> </span> . </li> <li> Запрос от курьера о выдаче веревки для доставки посылок во все города на пути от <span class=tex-span> <i> i </i> </span> до <span class=tex-span> <i> j </i> </span> включительно имеет вид <span class=tex-span> ? </span> <span class=tex-span> <i> i </i> </span> <span class=tex-span> <i> j </i> </span> , <span class=tex-span> 1 ≤ <i> i </i> , <i> j </i> ≤ <i> n </i> </span> . <p> </p> <p> </p> </li> </ul> </div> <p> </p> <p> </p> <div class=output-specification> <div class=section-title> Выходные данные </div> <p> </p> <p> Для каждого запроса доставки посылок выведите минимальную длину веревки, которую необходимо выдать курьеру. </p> </div> <p> </p> <p> </p> <div class=note> <div class=section-title> Группы тестов (Все группы независимы) </div> <p> </p> <p> 20 баллов&nbsp;— <span class=tex-span> ( 1 ≤ <i> n, k </i> ≤ <i>100</i>) . </span></p> <p> 30 баллов&nbsp;— каждый город соединен дорогами не более чем с двумя другими. </p> <p> 50 баллов&nbsp;— полные ограничения. </p> </div> </div> <div class=problem-statement><div class=sample-tests><div class=section-title>Примеры</div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>3
1 2 3
1 3
2 3
5
? 1 2
! 1 5
? 2 3
! 3 2
? 1 2</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>3
3
5</pre></div></div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>1
100
5
! 1 1
? 1 1
! 1 1000
? 1 1
! 1 1</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>1
1000</pre></div></div></div></div></div><hr><div class=statements_chapter><h1><a name=ch16>Приключение</a></h1><p class=statements_chapter_title><b>Задача C.</b> Приключение<div class=problem-statement> <div class=legend> <p style=margin-bottom:0;text-indent:1.27cm align=justify><font style=font-size:11pt size=2>Теплым весенним днем группа из <i>N</i> школьников-программистов гуляла в окрестностях города Кисловодска. К несчастью, они набрели на большую и довольно глубокую яму. Как это случилось — непонятно, но вся компания оказалась в этой яме.</font></p>
<p style=margin-bottom:0;text-indent:1.27cm align=justify><font style=font-size:11pt size=2>Глубина ямы равна <i>H</i>. Каждый школьник знает свой рост по плечи <i>h</i><sub><i>i</i></sub> и длину своих рук <i>l</i><sub><i>i</i></sub>. Таким образом, если он, стоя на дне ямы, поднимет руки, то его ладони окажутся на высоте <i>h</i><sub><i>i</i></sub> + <i>l</i><sub><i>i</i></sub> от уровня дна ямы. Школьники могут, вставая друг другу на плечи, образовывать вертикальную колонну. При этом любой школьник может встать на плечи любого другого школьника. Если под школьником <i>i</i> стоят школьники <i>j</i><sub>1</sub>, <i>j</i><sub>2</sub>, …, <i>j</i><sub><i>k</i></sub>, то он может дотянуться до уровня <i>h</i><sub><i>j</i></sub><sub>1</sub> + <i>h</i><sub><i>j</i></sub><sub>2</sub> + … + <i>h</i><sub><i>jk</i></sub> + <i>h</i><sub><i>i</i></sub> + <i>l</i><sub><i>i</i></sub>. </font></p>
<p style=margin-bottom:0;text-indent:1.27cm align=justify><font style=font-size:11pt size=2>Если школьник может дотянуться до края ямы (то есть <i>h</i><sub><i>j</i></sub><sub>1</sub> + <i>h</i><sub><i>j</i></sub><sub>2</sub> + … + <i>h</i><sub><i>jk</i></sub> + <i>h</i><sub><i>i</i></sub> + <i>l</i><sub><i>i</i></sub> ≥ <span lang=en-US><i>H</i></span>), то он может выбраться из нее. Выбравшиеся из ямы школьники не могут помочь оставшимся.</font></p>
<p style=margin-bottom:0;text-indent:1.27cm align=justify><font style=font-size:11pt size=2>Найдите наибольшее количество школьников, которые смогут выбраться из ямы до прибытия помощи, и перечислите их номера.</font></p> </div> <div class=input-specification> <div class=section-title> Входные данные </div> <p style=margin-bottom:0;text-indent:1.25cm align=justify><font style=font-size:11pt size=2>В первой строке входных данных&nbsp;задается&nbsp;натуральное число <span lang=en-US><i>N</i></span> (1 ≤ <span lang=en-US><i>N</i></span> ≤ 2000) — количество школьников, попавших в яму.</font></p>
<p style=margin-bottom:0;text-indent:1.25cm align=justify><font style=font-size:11pt size=2>Далее в <span lang=en-US><i>N</i></span> строках&nbsp;содержится по два целых числа: рост <span lang=en-US><i>i</i></span>-го школьника по плечи <span lang=en-US><i>h</i></span><sub><span lang=en-US><i>i</i></span></sub> (1 ≤ <span lang=en-US><i>h</i></span><sub><span lang=en-US><i>i</i></span></sub> ≤ 10<sup>5</sup>) и длина его рук <span lang=en-US><i>l</i></span><sub><span lang=en-US><i>i</i></span></sub> (1 ≤ <span lang=en-US><i>l</i></span><sub><span lang=en-US><i>i</i></span></sub> ≤ 10<sup>5</sup>).</font></p>
<p style=margin-bottom:0;text-indent:1.25cm align=justify><font style=font-size:11pt size=2>В последней строке указано целое число — глубина ямы <span lang=en-US><i>H</i></span> (1 ≤ <span lang=en-US><i>H</i></span> ≤ 10<sup>5</sup>).</font></p> </div> <div class=output-specification> <div class=section-title> Выходные данные </div> <p style=margin-bottom:0;text-indent:1.27cm align=justify><font style=font-size:11pt size=2>В первой строке выведите <i>K</i> — максимальное количество школьников, которые смогут выбраться из ямы. Если <span lang=en-US><i>K</i></span> > 0, то во второй строке в произвольном порядке выведите их номера, разделяя их пробелами. Школьники нумеруются с единицы в том порядке, в котором они заданы во входных данных. Если существует несколько решений, выведите любое.</font></p> </div> <p style=margin-top:.21cm;margin-bottom:.11cm align=justify><font face="Arial, sans-serif"><font size=3><i><b>Примечание</b></i></font></font></p>
<p style=margin-bottom:0;text-indent:1.25cm align=justify><font style=font-size:11pt size=2>Решение, дающее правильный ответ только при <span lang=en-US><i>N</i></span> ≤ 100; <span lang=en-US><i>H</i></span>, <span lang=en-US><i>h</i></span><sub><span lang=en-US><i>i</i></span></sub>, <span lang=en-US><i>l</i></span><sub><span lang=en-US><i>i</i></span></sub> ≤ 1000, будет оцениваться из 70 баллов.</font></p> </div><div class=problem-statement><div class=sample-tests><div class=section-title>Примеры</div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>1
239 239
566</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>0
</pre></div></div><div class=sample-test><div class=input><div class=title>Входные данные</div><pre class=content>3
1 2
1 2
4 1
7</pre></div><div class=output><div class=title>Выходные данные</div><pre class=content>2
2 1 </pre></div></div></div></div></div> <autoscroll></autoscroll>